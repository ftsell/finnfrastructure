bastion_private_address: "{{ hostvars['router']['private_ipv4'] }}"

private_iface_name: ens10

systemd_networkd_configs:
  20-private_iface.network: |
    [Match]
    Name={{ private_iface_name }}
    [Network]
    DHCP=yes
    Tunnel=ensOvl

  30-ovl.netdev: |
    [NetDev]
    Name=ensOvl
    Kind=ipip

    [Tunnel]
    Remote={{ bastion_private_address }}

  30-ovl.network: |
    [Match]
    Name=ensOvl
    [Network]
    Address={{ public_ipv4 }}/32
    DNS=185.12.64.2
    DNS=185.12.64.1
    [Route]
    Destination=0.0.0.0/0
