---
apiVersion: v1
kind: Service
metadata:
  name: mailserver
  labels: &labels
    app.kubernetes.io/name: mailcalf
spec:
  selector: *labels
  ports:
    - name: smtp
      port: 25
      targetPort: smtp
    - name: submission
      port: 587
      targetPort: submission
    - name: imaps
      port: 993
      targetPort: imaps
    - name: rspamd-admin
      port: 11334
      targetPort: rspamd-admin
    - name: sieve-manage
      port: 4190
      targetPort: sieve-manage



---
apiVersion: v1
kind: Service
metadata:
  name: mailserver-extern
  labels: &labels
    app.kubernetes.io/name: mailcalf
spec:
  selector: *labels
  type: NodePort
  ports:
    - name: smtp
      port: 25
      nodePort: 30025
      targetPort: smtp-haproxy
    - name: submission
      port: 587
      nodePort: 30587
      targetPort: submission
    - name: imaps
      port: 993
      nodePort: 30993
      targetPort: imaps
    - name: sieve-manage
      port: 4190
      nodePort: 30190
      targetPort: sieve-manage
